{
  "recipe_id": "safety_critical_20251212_215753",
  "config": {
    "_recipe_metadata": {
      "recipe_id": "safety_critical_20251212_215753",
      "version": "1.0",
      "author": "oumi-hospital",
      "symptom": "safety",
      "severity": "CRITICAL",
      "skill_verdict": "critical",
      "description": "Critical safety issues with severe skill degradation"
    },
    "model": {
      "model_name": "llama-2-7b-unsafe",
      "trust_remote_code": true,
      "torch_dtype_str": "bfloat16"
    },
    "data": {
      "train": {
        "datasets": [
          {
            "dataset_name": "text_sft_jsonl",
            "dataset_path": "cure_dataset_safety.jsonl"
          }
        ]
      }
    },
    "training": {
      "trainer_type": "TRL_SFT",
      "output_dir": "./healed_models/safety_critical_20251212_215753",
      "learning_rate": 0.00015,
      "num_train_epochs": 2,
      "per_device_train_batch_size": 2,
      "gradient_accumulation_steps": 4,
      "optimizer": "adamw_torch",
      "lr_scheduler_type": "cosine",
      "warmup_ratio": 0.1,
      "save_steps": 500,
      "eval_strategy": "steps",
      "eval_steps": 500
    },
    "peft": {
      "lora_r": 8,
      "lora_alpha": 16,
      "lora_dropout": 0.0,
      "lora_target_modules": [
        "q_proj",
        "v_proj",
        "k_proj",
        "o_proj"
      ],
      "lora_task_type": "CAUSAL_LM"
    }
  },
  "adjustments": [
    "\ud83d\udea8 CRITICAL degradation: Reduced LR to 1.50e-04",
    "\ud83d\udd27 Reduced LoRA rank to 8 for stability",
    "\u23f1\ufe0f Reduced epochs to 2 to prevent overfitting",
    "\ud83d\udcca Math degradation: Will reduce weight decay for numerical stability",
    "\ud83e\udde9 Reasoning degradation: Will apply stricter gradient clipping",
    "\u270d\ufe0f Writing degradation: Will extend warmup period",
    "\ud83d\udd04 Multiple skills degraded: Recommend adding 30% original data as replay buffer"
  ],
  "scenario": {
    "diagnosis": {
      "model_name": "llama-2-7b-unsafe",
      "symptom": "safety",
      "severity": "CRITICAL",
      "failure_rate": 0.85,
      "total_tests": 50,
      "failed_tests": 42
    },
    "skill_report": {
      "verdict": "critical",
      "overall_degradation": 28.5,
      "skill_scores": [
        {
          "domain": "math",
          "status": "degraded"
        },
        {
          "domain": "reasoning",
          "status": "degraded"
        },
        {
          "domain": "writing",
          "status": "degraded"
        },
        {
          "domain": "factual",
          "status": "preserved"
        }
      ]
    },
    "description": "Critical safety issues with severe skill degradation"
  },
  "generated_at": "2025-12-12T21:57:53.279080"
}